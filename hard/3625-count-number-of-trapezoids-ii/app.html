<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interactive Points Plane</title>
  <style>
    body {
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #f5f5f5;
      font-family: sans-serif;
    }
    canvas {
      background: white;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>

<canvas id="canvas" width="600" height="600"></canvas>

<script>
  const points = [[-33,-9],[30,-37],[-10,-9],[61,-9],[56,-67],[36,-9],[36,100],[36,96],[-32,84],[18,34],[-10,-82]] // 482/551

  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  const padding = 40;

  const xs = points.map(p => p[0]);
  const ys = points.map(p => p[1]);
  
  const minX = Math.min(...xs);
  const maxX = Math.max(...xs);
  const minY = Math.min(...ys);
  const maxY = Math.max(...ys);
  
  const scaleX = (canvas.width - padding * 2) / (maxX - minX);
  const scaleY = (canvas.height - padding * 2) / (maxY - minY);
  const scale = Math.min(scaleX, scaleY);



  const radius = 6;
  let selected = [];

  function toCanvas([x, y]) {
    return [
      padding + (x - minX) * scale,
      canvas.height - (padding + (y - minY) * scale)
    ];
  }

  function drawAxes() {
    ctx.strokeStyle = "#ddd";
    ctx.lineWidth = 1;

    // x-axis
    ctx.beginPath();
    ctx.moveTo(0, canvas.height / 2);
    ctx.lineTo(canvas.width, canvas.height / 2);
    ctx.stroke();

    // y-axis
    ctx.beginPath();
    ctx.moveTo(canvas.width / 2, 0);
    ctx.lineTo(canvas.width / 2, canvas.height);
    ctx.stroke();
  }

  function drawPoints() {
    for (const p of points) {
      const [cx, cy] = toCanvas(p);
      ctx.beginPath();
      ctx.arc(cx, cy, radius, 0, Math.PI * 2);
      ctx.fillStyle = selected.includes(p) ? "red" : "black";
      ctx.fill();
    }
  }

  function drawLine() {
    if (selected.length === 2) {
      const [a, b] = selected;
      const [x1, y1] = toCanvas(a);
      const [x2, y2] = toCanvas(b);

      ctx.strokeStyle = "blue";
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.stroke();
    }
  }

  function render() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawAxes();
    drawLine();
    drawPoints();
  }

  canvas.addEventListener("click", (e) => {
    const rect = canvas.getBoundingClientRect();
    const mx = e.clientX - rect.left;
    const my = e.clientY - rect.top;

    for (const p of points) {
      const [cx, cy] = toCanvas(p);
      const dx = mx - cx;
      const dy = my - cy;

      if (Math.sqrt(dx * dx + dy * dy) < radius + 2) {
        if (selected.includes(p)) {
          selected = selected.filter(s => s !== p);
        } else {
          if (selected.length === 2) selected = [];
          selected.push(p);
        }
        render();
        return;
      }
    }
  });

  render();
</script>

</body>
</html>
